stages:
  - tests

before_script:
  - shopt -s expand_aliases
  - alias php='/usr/bin/php7.2'
  - alias npm='/root/.nvm/versions/node/v8.11.3/bin/npm'

tests_php:
  stage: tests
  script:
    - export $(grep -v '^#' .env.dist | xargs)
    - composer install
    - make phpunit
    - php bin/console cache:warmup
    - make syntax_check
  tags:
    - mintme.abchosting.org

tests_assets:
  stage: tests
  script:
    - npm install
    - npm run stylelint
    - npm run eslint
    - npm run unit
  tags:
    - mintme.abchosting.org