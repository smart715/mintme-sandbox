{% extends 'base.html.twig' %}
{% block title %}
    {% spaceless %}
        {% trans %}page.news.title{% endtrans %} | mintMe
    {% endspaceless %}
{% endblock %}

{% block content %}
    <div class="container pt-4 text-white news">
        <div class="row justify-content-center">
            <div class="col-md-12 card-fixed-large px-0">
                <div id="news-selector">
                    {% set i = 0 %}
                    {% for post in pager.getResults() %}
                        <div class="news-box p-4 mb-5" data-aos="fade-up">
                            <header>
                                <h2 class="word-break">
                                    <a href="{{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}">
                                        {{ post|translateArticle('title') }}
                                    </a>
                                </h2>

                                <div>{{ post.publicationDateStart | format_date }}</div>
                            </header>

                            <div class="row">
                                {% if post.image != null %}
                                    <div class="center-block text-center col-12">
                                        <a href="{{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}">
                                            <news-image src="{% path post.image, 'wide' %}" v-bind:query-number="{{i}}"></news-image>
                                        {% set i = i+1 %}
                                        </a>
                                    </div>
                                {% endif %}
                                <p class="mt-4 mb-1 col-12 word-break">
                                    {{ post|translateArticle('abstract') }}
                                </p>
                                <div class="col-12 pt-3 read-more">
                                    <a class="py-1 undraggable float-right" href="{{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}">{% trans %}page.news.read_more{% endtrans %}</a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        {{ 'no_post_found'|trans({}, 'SonataNewsBundle') }}
                    {% endfor %}

                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item {% if pager.page == pager.firstPage %} disabled {% endif %}">
                                <a class="page-link" href="{{ url(route, route_parameters|merge({'page': pager.previouspage})) }}" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                    <span class="sr-only">{% trans %}previous{% endtrans %}</span>
                                </a>
                            </li>
                            {% for pageNumber in pager.getLinks(5) %}
                                <li class="page-item {% if pager.page == pageNumber %} active {% endif %}">
                                    <a class="page-link" href="{{ url(route, route_parameters|merge({'page': pageNumber})) }}">{{ pageNumber }}</a>
                                    {% if pager.page == pageNumber %} <span class="sr-only">{% trans %}page.news.current{% endtrans %}</span> {% endif %}
                                </li>
                            {% endfor %}
                            <li class="page-item {% if pager.page == pager.lastPage %} disabled{% endif %}">
                                <a class="page-link" href="{{ url(route, route_parameters|merge({'page': pager.nextpage})) }}" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                    <span class="sr-only">{% trans %}next{% endtrans %}</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block pagescripts %}
    {{ encore_entry_script_tags('news') }}
{% endblock %}
