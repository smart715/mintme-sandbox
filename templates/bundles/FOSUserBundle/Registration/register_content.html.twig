{% trans_default_domain 'FOSUserBundle' %}

{% extends 'form.html.twig' %}

{% set formHeader = "Sign Up" %}
{% set featured = true %}

{% block formBody %}
    {{ form_start(form, {'method': 'post', 'action': path('fos_user_registration_register'), 'attr': {'class': 'fos_user_registration_register', 'id': 'register'}}) }}
    {{ form_row(form.email, { 'inline': false, 'attr': {'pattern': '[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$', 'required': 'required', 'autocomplete': 'off'} }) }}
    {% include 'form/nickname_field.html.twig' %}
    <div v-cloak="$v.nickname" v-if="!$v.nickname.minLength" class="text-danger text-center small">
        Minimum length must be 2
    </div>
    <div v-cloak="$v.nickname" v-if="!$v.nickname.helpers" class="text-danger text-center small">
        Nickname can contain only latin letters and numbers
    </div>
    <div>
            <passwordmeter :password="password" @toggle-error="toggleError">
                <span @click="togglePassword()" class="show-password">
                    <i class="far fa-eye"></i>
                </span>
                {{ form_row(form.plainPassword, { 'inline': false, 'attr': {'v-model': 'password', 'autocomplete': 'off'} }) }}
            </passwordmeter>
        </div>
        <div class="py-2">
            {{ form_row(form.recaptcha, { 'inline': false }) }}
        </div>
        <div class="text-left">
            <input type="submit" :disabled="disabled" class="btn btn-primary" value="Sign Up">
            <span class="px-3">or</span>
            <a class="btn-cancel px-0" href="{{ path('fos_user_security_login') }}">Log In</a>
        </div>
        <p class="text-left pt-3">
            By clicking Sign Up, you accept <br><a target="_blank" href="{{ path('terms_of_service') }}">Terms of Service</a> and <a target="_blank" href="{{ path('privacy_policy') }}">Privacy policy</a>
        </p>
    {{ form_end(form) }}
    {% include 'recaptcha_script.html.twig' with { recaptcha: form.recaptcha } %}
{% endblock %}
