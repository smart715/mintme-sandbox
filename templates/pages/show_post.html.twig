{% extends 'base.html.twig' %}

{%  set loggedIn = app.user ? 'true' : 'false' %}
{% set authUsername = app.user ? app.user.profile.nickname : '' %}

{% block content %}
    <div id="show_post" class="container">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="row justify-content-center">
                    <div class="col-12 col-md-10 col-lg-8">
                        <div class="card h-100 single-post-page">
                            <div class="card-body posts">
                                <post
                                    :post="{{ post | json_encode }}"
                                    @delete-post="$emit('delete-post', $event)"
                                    :show-edit="{{ showEdit }}"
                                    @go-to-trade="$emit('go-to-trade', $event)"
                                    :logged-in="{{ loggedIn }}"
                                    single-page
                                ></post>
                                <comments
                                    :comments="comments || (comments = {{ comments | json_encode }})"
                                    :post-id="{{ post.id }}"
                                    token-name="{{ post.token.name }}"
                                    :logged-in="{{ loggedIn }}"
                                    auth-username="{{ authUsername }}"
                                    :post="{{ post | json_encode }}"
                                    @delete-comment="deleteComment"
                                    @new-comment="newComment"
                                ></comments>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block pagescripts %}
    <script src="{{ asset('build/show_post.js') }}"></script>
{% endblock %}